# Интернет-магазин «Петрушка Зеленая» — тестовое задание

Репозиторий содержит решение тестового задания, включающее:
- анализ и исправление противоречивых требований,
- проектирование REST API,
- верхнеуровневое проектирование архитектуры PUSH-уведомлений.

## Структура решения
1. Анализ требований
   - Выявлены противоречия (количество товара, удаление, логика цены, лимиты корзины, рекламный блок, формальные ошибки).
   - Предложена исправленная, непротиворечивая версия ТЗ с явными лимитами и сообщениями об ошибках.

2. Проектирование REST API
   - Примеры запросов/ответов (версия `/api/v1/...`) и схема авторизации `Authorization: Bearer <token>`.
   - Пример: `GET /api/v1/partners/stores` — список партнерских магазинов.

3. Архитектура PUSH-уведомлений
   - Верхнеуровневая схема: Mobile App → API Gateway → Notification Service → Message Broker → Push Worker → FCM/APNS → User Device
   - Описание потоков событий, формирования payload и отправки через Push Worker.
   - Обоснование: масштабируемость, слабая связность, возможность расширения типов уведомлений.

## Исправленная версия ТЗ (кратко)
- Количество одного товара: 1–10 единиц.
- Минимум в корзине — 1 единица; уменьшение ниже 1 запрещено.
- Удаление товара — отдельная кнопка «Удалить».
- Не более 5 разных товаров в корзине.
- Суммарно не более 20 единиц всех товаров.
- При нарушении лимита — к��нкретное сообщение:
  - «Превышено максимальное количество товара»
  - «Превышено максимальное количество разных товаров»
  - «Превышено максимальное общее количество товаров»
- Цена фиксируется на момент добавления в корзину.
- Рекламный блок отображается в будние дни (Пн–Пт) по локальному времени пользователя:
  - утро: 08:00–11:00
  - вечер: 18:00–21:00

## Уточняющие вопросы к заказчику (рекомендуется)
1. Цена корзины: фиксированная или должна обновляться динамически?
2. Что делать при одновременном нарушении нескольких лимитов?
3. Сохраняется ли корзина между сессиями/привязана ли к аккаунту?
4. Нужна ли полная очистка корзины?
5. Требуется ли персонализация рекламных блоков?
6. Какие события корзины отправлять в аналитику?
